<!DOCTYPE html>
<html>
<head>
  <title>Live Location - Google Maps</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; }
    #map { height: 100vh; width: 100%; }
    .info {
      position: fixed;
      top: 10px; left: 10px;
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 8px 12px;
      border-radius: 6px;
      z-index: 999;
      font-size: 13px;
    }
  </style>
</head>
<body>

<div class="info">
  Lat: <span id="lat">--</span><br>
  Lon: <span id="lon">--</span><br>
  Accuracy: <span id="acc">--</span> m
</div>

<div id="map"></div>

<script>
  let map, marker, accuracyCircle;

  function initMap() {
    // default center (will update once GPS is available)
    const defaultPos = { lat: 27.7172, lng: 85.3240 }; // Kathmandu
    map = new google.maps.Map(document.getElementById("map"), {
      zoom: 16,
      center: defaultPos,
      mapTypeId: "roadmap",
    });

    marker = new google.maps.Marker({
      position: defaultPos,
      map: map,
      title: "You are here",
    });

    accuracyCircle = new google.maps.Circle({
      strokeColor: "#4285F4",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#4285F4",
      fillOpacity: 0.15,
      map: map,
      center: defaultPos,
      radius: 10,
    });
  }

  function updateLocation() {
    if (!navigator.geolocation) {
      alert("Geolocation not supported by your browser");
      return;
    }

    navigator.geolocation.getCurrentPosition(
      (pos) => {
        const lat = pos.coords.latitude;
        const lng = pos.coords.longitude;
        const acc = pos.coords.accuracy;

        document.getElementById("lat").innerText = lat.toFixed(6);
        document.getElementById("lon").innerText = lng.toFixed(6);
        document.getElementById("acc").innerText = acc.toFixed(1);

        const currentPos = { lat, lng };

        marker.setPosition(currentPos);
        accuracyCircle.setCenter(currentPos);
        accuracyCircle.setRadius(acc);
        map.panTo(currentPos);
      },
      (err) => console.log("GPS error:", err.message),
      { enableHighAccuracy: true, maximumAge: 0, timeout: 10000 }
    );
  }

  // update every 1 second
  setInterval(updateLocation, 1000);
</script>

<!-- Load Google Maps JS API -->
<script
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap"
  async defer>
</script>

</body>
</html>
